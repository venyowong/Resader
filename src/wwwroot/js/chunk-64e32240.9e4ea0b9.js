(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64e32240"],{"291b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",round:""},on:{click:t.unsubscribe}},[t._v(" 取消订阅 ")])],1),i("div",[i("h3",[t._v(" "+t._s(t.title)+" ")])]),t._l(t.articles,(function(e){return i("div",{key:e.id,staticClass:"article"},[t.ignoreRead&&e.read?t._e():i("div",[i("el-link",{attrs:{underline:!1},on:{click:function(i){return t.readArticle(e)}}},[i("h3",[e.read?i("font",{attrs:{color:"#808080"}},[t._v(t._s(e.title))]):i("font",[t._v(t._s(e.title))])],1)]),i("p",[i("font",{attrs:{color:"#808080"}},[t._v(t._s(e.summary))])],1),i("div",[i("font",{attrs:{color:"#808080"}},[t._v(t._s(e.published))])],1)],1)])})),null!=t.articles&&t.articles.length>0?i("el-row",[i("el-button",{on:{click:t.readAndLoad}},[t._v("以上标记为已读，并加载更多")]),i("el-button",{on:{click:t.loadMore}},[t._v("加载更多")])],1):t._e()],2)},r=[],s=(i("99af"),i("4de4"),i("7db0"),i("d81d"),i("d3b7"),i("69d9")),a={data:function(){return{articles:[],id:s["a"].getQueryStringByName("id"),title:decodeURIComponent(s["a"].getQueryStringByName("name")),user:s["a"].getUser(),endTime:null,ignoreRead:"true"==window.localStorage.getItem("ignoreRead")}},methods:{unsubscribe:function(){this.id&&fetch("https://venyo.cn/resader/rss/unsubscribe",{body:JSON.stringify({UserId:this.user.id,Feeds:[this.id]}),method:"POST",headers:{Authorization:"Bearer ".concat(this.user.token),"Content-Type":"application/json"}}).then(function(t){if(200==t.status)return t.json();401==t.status&&this.logout()}.bind(this)).then(function(t){var e=s["a"].checkResponse(t);e.result?(this.$message("取消订阅成功"),window.location.href="./"):this.$message(e.msg)}.bind(this))},loadArticles:function(t){fetch("https://venyo.cn/resader/rss/articles?feedId=".concat(this.id,"&page=0&pageCount=30&endTime=").concat(this.endTime,"&userId=").concat(this.user.id),{method:"GET",headers:{Authorization:"Bearer ".concat(this.user.token)}}).then(function(t){if(200==t.status)return t.json();401==t.status&&this.logout()}.bind(this)).then(function(e){var i=s["a"].checkResponse(e);if(i.result){e.data.length>0&&(this.endTime=e.data[e.data.length-1].published),this.articles=t?this.articles.concat(e.data):e.data;var n=e.data.filter((function(t){return!t.read})).length,r="";r=n>0?"已加载".concat(n,"篇未读文章"):"已加载".concat(e.data.length,"篇已读文章"),this.$message(r)}else this.$message(i.msg)}.bind(this))},readArticles:function(t){fetch("https://venyo.cn/resader/rss/read",{method:"POST",body:JSON.stringify({UserId:this.user.id,Articles:t}),headers:{Authorization:"Bearer ".concat(this.user.token),"Content-Type":"application/json"}}).then((function(t){if(200==t.status)return t.json();401==t.status&&this.logout()})).then(function(e){var i=s["a"].checkResponse(e);if(i.result)for(var n=0;n<t.length;n++){var r=this.articles.find((function(e){return e.id==t[n]}));r.read=!0}else this.$message(i.msg)}.bind(this))},readAndLoad:function(){this.readArticles(this.articles.filter((function(t){return!t.read})).map((function(t){return t.id}))),this.loadArticles()},loadMore:function(){this.loadArticles(!0)},readArticle:function(t){this.readArticles([t.id]),window.open(t.url,"_blank")}},created:function(){this.loadArticles()},watch:{$route:function(){this.id=s["a"].getQueryStringByName("id"),this.title=decodeURIComponent(s["a"].getQueryStringByName("name")),this.endTime=null,this.articles=[],this.loadArticles()}}},o=a,c=(i("560c"),i("2877")),d=Object(c["a"])(o,n,r,!1,null,"2942141d",null);e["default"]=d.exports},"4de4":function(t,e,i){"use strict";var n=i("23e7"),r=i("b727").filter,s=i("1dde"),a=i("ae40"),o=s("filter"),c=a("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"560c":function(t,e,i){"use strict";var n=i("f898"),r=i.n(n);r.a},d81d:function(t,e,i){"use strict";var n=i("23e7"),r=i("b727").map,s=i("1dde"),a=i("ae40"),o=s("map"),c=a("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},f898:function(t,e,i){}}]);
//# sourceMappingURL=chunk-64e32240.9e4ea0b9.js.map