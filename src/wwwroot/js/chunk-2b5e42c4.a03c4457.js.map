{"version":3,"sources":["webpack:///./src/views/Settings.vue?a611","webpack:///src/views/Settings.vue","webpack:///./src/views/Settings.vue?91de","webpack:///./src/views/Settings.vue","webpack:///./src/views/Settings.vue?e408"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","on","setIgnoreRead","model","value","callback","$$v","ignoreRead","expression","staticClass","password","newPwd","cfmNewPwd","resetPassword","staticRenderFns","fetch","result","$message","setTimeout","window","localStorage","removeItem","location","href","msg","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,QAAQF,EAAG,YAAY,CAACG,MAAM,CAAC,eAAe,UAAU,iBAAiB,UAAU,cAAc,QAAQ,gBAAgB,QAAQC,GAAG,CAAC,OAASR,EAAIS,eAAeC,MAAM,CAACC,MAAOX,EAAc,WAAEY,SAAS,SAAUC,GAAMb,EAAIc,WAAWD,GAAKE,WAAW,gBAAgBX,EAAG,MAAMA,EAAG,KAAK,CAACJ,EAAIM,GAAG,UAAUF,EAAG,UAAU,CAACG,MAAM,CAAC,iBAAiB,QAAQ,cAAc,SAAS,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACY,YAAY,WAAWT,MAAM,CAAC,KAAO,YAAYG,MAAM,CAACC,MAAOX,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIiB,SAASJ,GAAKE,WAAW,eAAe,GAAGX,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACY,YAAY,WAAWT,MAAM,CAAC,KAAO,YAAYG,MAAM,CAACC,MAAOX,EAAU,OAAEY,SAAS,SAAUC,GAAMb,EAAIkB,OAAOL,GAAKE,WAAW,aAAa,GAAGX,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,WAAW,CAACY,YAAY,WAAWT,MAAM,CAAC,KAAO,YAAYG,MAAM,CAACC,MAAOX,EAAa,UAAEY,SAAS,SAAUC,GAAMb,EAAImB,UAAUN,GAAKE,WAAW,gBAAgB,GAAGX,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIoB,gBAAgB,CAACpB,EAAIM,GAAG,WAAW,IAAI,IAAI,IACxsCe,EAAkB,G,6CC8BtB,GACE,KADF,WAEI,MAAJ,CACM,OAAN,KACM,SAAN,KACM,UAAN,KACM,WAAN,kDACM,KAAN,mBAGE,QAAF,CACI,cADJ,WAEM,OAAN,4DAEI,cAJJ,WAKA,cAIWpB,KAAKiB,OAILjB,KAAKkB,UAINlB,KAAKiB,QAAUjB,KAAKgB,SAIpBhB,KAAKiB,QAAUjB,KAAKkB,UAKxBG,MAAM,8CAAZ,CACQ,OAAR,OACQ,QAAR,CACU,cAAV,kCACU,eAAV,oBAEQ,KAAR,gBACU,YAAV,mBACU,SAAV,iBACU,OAAV,iBAGA,iBACQ,GAAR,cACU,OAAV,SAEA,eACU,KAAV,UAEA,YACA,iBACQ,IAAR,0BACYC,EAAOA,QACTtB,KAAKuB,SAAS,UACdC,YAAW,WACTC,OAAOC,aAAaC,WAAW,QAC/BF,OAAOG,SAASC,KAAO,OACnC,MAGU7B,KAAKuB,SAASD,EAAOQ,MAE/B,YApCQ,KAAR,uBAJQ,KAAR,wBAJQ,KAAR,mBAJQ,KAAR,mBAJQ,KAAR,sBC/CkV,I,wBCQ9UC,EAAY,eACd,EACAjC,EACAsB,GACA,EACA,KACA,WACA,MAIa,aAAAW,E,2CCnBf,yBAAue,EAAG,G","file":"js/chunk-2b5e42c4.a03c4457.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"设置\")]),_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#dcdfe6\",\"active-text\":\"只展示未读\",\"inactive-text\":\"展示全部\"},on:{\"change\":_vm.setIgnoreRead},model:{value:(_vm.ignoreRead),callback:function ($$v) {_vm.ignoreRead=$$v},expression:\"ignoreRead\"}}),_c('hr'),_c('h3',[_vm._v(\"重置密码\")]),_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"原密码\"}},[_c('el-input',{staticClass:\"password\",attrs:{\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\"}},[_c('el-input',{staticClass:\"password\",attrs:{\"type\":\"password\"},model:{value:(_vm.newPwd),callback:function ($$v) {_vm.newPwd=$$v},expression:\"newPwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\"}},[_c('el-input',{staticClass:\"password\",attrs:{\"type\":\"password\"},model:{value:(_vm.cfmNewPwd),callback:function ($$v) {_vm.cfmNewPwd=$$v},expression:\"cfmNewPwd\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.resetPassword}},[_vm._v(\"重置密码\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h3>设置</h3>\r\n    <el-switch v-model=\"ignoreRead\" active-color=\"#13ce66\" inactive-color=\"#dcdfe6\" active-text=\"只展示未读\" \r\n      inactive-text=\"展示全部\" @change=\"setIgnoreRead\">\r\n    </el-switch>\r\n\r\n    <hr/>\r\n\r\n    <h3>重置密码</h3>\r\n    <el-form label-position=\"right\" label-width=\"80px\">\r\n      <el-form-item label=\"原密码\">\r\n        <el-input class=\"password\" type=\"password\" v-model=\"password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"新密码\">\r\n        <el-input class=\"password\" type=\"password\" v-model=\"newPwd\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"确认密码\">\r\n        <el-input class=\"password\" type=\"password\" v-model=\"cfmNewPwd\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"resetPassword\">重置密码</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import common from \"@/common.js\"\r\n  import md5 from \"js-md5\"\r\n\r\n  export default {\r\n   data() {\r\n      return {\r\n        newPwd: null,\r\n        password: null,\r\n        cfmNewPwd: null,\r\n        ignoreRead: window.localStorage.getItem(\"ignoreRead\") == \"true\",\r\n        user: common.getUser()\r\n      };\r\n   },\r\n   methods: {\r\n     setIgnoreRead() {\r\n       window.localStorage.setItem(\"ignoreRead\", String(this.ignoreRead));\r\n     },\r\n     resetPassword() {\r\n       if (!this.password) {\r\n          this.$message(\"请输入原密码\");\r\n          return;\r\n      }\r\n      if (!this.newPwd) {\r\n          this.$message(\"请输入新密码\");\r\n          return;\r\n      }\r\n      if (!this.cfmNewPwd) {\r\n          this.$message(\"请确认新密码\");\r\n          return;\r\n      }\r\n      if (this.newPwd == this.password) {\r\n          this.$message(\"新密码不能与原密码一致\");\r\n          return;\r\n      }\r\n      if (this.newPwd != this.cfmNewPwd) {\r\n          this.$message(\"两次新密码输入不一致\");\r\n          return;\r\n      }\r\n\r\n      fetch(`https://venyo.cn/resader/user/resetpassword`, {\r\n          method: \"POST\",\r\n          headers: {\r\n              \"Authorization\": `Bearer ${this.user.token}`,\r\n              \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify({\r\n              OldPassword: md5(this.password),\r\n              Password: md5(this.newPwd),\r\n              UserId: this.user.id\r\n          })\r\n      })\r\n      .then(function (response) {\r\n          if (response.status == 200) {\r\n              return response.json();\r\n          }\r\n          if (response.status == 401) {\r\n              this.logout();\r\n          }\r\n      }.bind(this))\r\n      .then(function (response) {\r\n        let result = common.checkResponse(response);\r\n        if (result.result) {\r\n          this.$message(\"密码重置成功\");\r\n          setTimeout(function () {\r\n            window.localStorage.removeItem(\"user\");\r\n            window.location.href = \"./\";\r\n          }, 1000)\r\n        }\r\n        else {\r\n          this.$message(result.msg);\r\n        }\r\n      }.bind(this));\r\n     }\r\n   }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n  .password {\r\n    width: auto;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=6f3f4c37&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=6f3f4c37&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f3f4c37\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6f3f4c37&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6f3f4c37&scoped=true&lang=css&\""],"sourceRoot":""}