{"version":3,"sources":["webpack:///./src/views/Articles.vue?810b","webpack:///src/views/Articles.vue","webpack:///./src/views/Articles.vue?c070","webpack:///./src/views/Articles.vue","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/Articles.vue?c773","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","on","unsubscribe","_v","_s","title","_l","article","key","id","staticClass","ignoreRead","read","_e","$event","readArticle","summary","published","articles","length","readAndLoad","loadMore","staticRenderFns","component","$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","undefined","$map","map"],"mappings":"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","file":"js/chunk-18d917a7.9d06373e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":_vm.unsubscribe}},[_vm._v(\" 取消订阅 \")])],1),_c('div',[_c('h3',[_vm._v(\" \"+_vm._s(_vm.title)+\" \")])]),_vm._l((_vm.articles),function(article){return _c('div',{key:article.id,staticClass:\"article\"},[(!_vm.ignoreRead || !article.read)?_c('div',[_c('el-link',{attrs:{\"underline\":false},on:{\"click\":function($event){return _vm.readArticle(article)}}},[_c('h3',[(!article.read)?_c('font',[_vm._v(_vm._s(article.title))]):_c('font',{attrs:{\"color\":\"#808080\"}},[_vm._v(_vm._s(article.title))])],1)]),_c('p',[_c('font',{attrs:{\"color\":\"#808080\"}},[_vm._v(_vm._s(article.summary))])],1),_c('div',[_c('font',{attrs:{\"color\":\"#808080\"}},[_vm._v(_vm._s(article.published))])],1)],1):_vm._e()])}),(_vm.articles != null && _vm.articles.length > 0)?_c('el-row',[_c('el-button',{on:{\"click\":_vm.readAndLoad}},[_vm._v(\"以上标记为已读，并加载更多\")]),_c('el-button',{on:{\"click\":_vm.loadMore}},[_vm._v(\"加载更多\")])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div style=\"float: right;\">\r\n      <el-button type=\"danger\" round style=\"margin-right: 10px;\" @click=\"unsubscribe\">\r\n        取消订阅\r\n      </el-button>\r\n    </div>\r\n    <div>\r\n      <h3>\r\n        {{title}}\r\n      </h3>\r\n    </div>\r\n    <div class=\"article\" :key=\"article.id\" v-for=\"article in articles\">\r\n      <div v-if=\"!ignoreRead || !article.read\">\r\n        <el-link :underline=\"false\" @click=\"readArticle(article)\">\r\n          <h3>\r\n            <font v-if=\"!article.read\">{{article.title}}</font>\r\n            <font color=\"#808080\" v-else>{{article.title}}</font>\r\n          </h3>\r\n        </el-link>\r\n        <p><font color=\"#808080\">{{article.summary}}</font></p> \r\n        <div><font color=\"#808080\">{{article.published}}</font></div>\r\n      </div>\r\n    </div>\r\n    <el-row v-if=\"articles != null && articles.length > 0\">\r\n      <el-button @click=\"readAndLoad\">以上标记为已读，并加载更多</el-button>\r\n      <el-button @click=\"loadMore\">加载更多</el-button>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import common from \"@/common.js\"\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        articles: [],\r\n        id: common.getQueryStringByName(\"id\"),\r\n        title: decodeURIComponent(common.getQueryStringByName(\"name\")),\r\n        user: common.getUser(),\r\n        endTime: null,\r\n        ignoreRead: window.localStorage.getItem(\"ignoreRead\") == \"true\"\r\n      }\r\n    },\r\n    methods: {\r\n      unsubscribe() {\r\n        if (!this.id) {\r\n          return;\r\n        }\r\n\r\n        fetch(`${common.baseUrl}rss/unsubscribe`, {\r\n            body: JSON.stringify({\r\n                UserId: this.user.id,\r\n                Feeds: [this.id]\r\n            }),\r\n          method: \"POST\",\r\n          headers: {\r\n              \"Authorization\": `Bearer ${this.user.token}`,\r\n              \"Content-Type\": \"application/json\"\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          if (response.status == 200) {\r\n            return response.json();\r\n          }\r\n          if (response.status == 401) {\r\n            this.logout();\r\n          }\r\n        }.bind(this))\r\n        .then(function(response) {\r\n          let result = common.checkResponse(response);\r\n          if (result.result) {\r\n            this.$message(\"取消订阅成功\");\r\n            window.location.href = \"./\";\r\n          }\r\n          else {\r\n            this.$message(result.msg);\r\n          }\r\n        }.bind(this));\r\n      },\r\n      loadArticles: function(append) {\r\n        fetch(`${common.baseUrl}rss/articles?feedId=${this.id}&page=0&pageCount=30&endTime=${this.endTime}&userId=${this.user.id}`, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Authorization\": `Bearer ${this.user.token}`\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          if (response.status == 200) {\r\n            return response.json();\r\n          }\r\n          if (response.status == 401) {\r\n            this.logout();\r\n          }\r\n        }.bind(this))\r\n        .then(function(response) {\r\n          let result = common.checkResponse(response);\r\n          if (result.result) {\r\n            if (response.data.length > 0) {\r\n              this.endTime = response.data[response.data.length - 1].published;\r\n            }\r\n            if (append) {\r\n              this.articles = this.articles.concat(response.data);\r\n            }\r\n            else {\r\n              this.articles = response.data;\r\n            }\r\n            var unreadCount = response.data.filter(a => !a.read).length;\r\n            var msg = '';\r\n            if (unreadCount > 0) {\r\n              msg = `已加载${unreadCount}篇未读文章`;\r\n            }\r\n            else {\r\n              msg = `已加载${response.data.length}篇已读文章`;\r\n            }\r\n            this.$message(msg);\r\n          }\r\n          else {\r\n            this.$message(result.msg);\r\n          }\r\n        }.bind(this));\r\n      },\r\n      readArticles(ids) {\r\n        fetch(`${common.baseUrl}rss/read`, {\r\n          method: \"POST\",\r\n            body: JSON.stringify({\r\n                UserId: this.user.id,\r\n                Articles: ids\r\n            }),\r\n          headers: {\r\n              \"Authorization\": `Bearer ${this.user.token}`,\r\n              \"Content-Type\": \"application/json\"\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          if (response.status == 200) {\r\n            return response.json();\r\n          }\r\n          if (response.status == 401) {\r\n            this.logout();\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          let result = common.checkResponse(response);\r\n          if (result.result) {\r\n            for (var i = 0; i < ids.length; i++) {\r\n              var article = this.articles.find(a => a.id == ids[i]);\r\n              article.read = true;\r\n            }\r\n          }\r\n          else {\r\n            this.$message(result.msg);\r\n          }\r\n        }.bind(this));\r\n      },\r\n      readAndLoad() {\r\n        this.readArticles(this.articles.filter(item => !item.read).map(a => a.id));\r\n        this.loadArticles()\r\n      },\r\n      loadMore() {\r\n        this.loadArticles(true);\r\n      },\r\n      readArticle(article) {\r\n        this.readArticles([article.id]);\r\n        window.open(article.url, '_blank');\r\n      }\r\n    },\r\n    created() {\r\n      this.loadArticles();\r\n    },\r\n    watch: {\r\n      $route() {\r\n        this.id = common.getQueryStringByName(\"id\");\r\n        this.title = decodeURIComponent(common.getQueryStringByName(\"name\"));\r\n        this.endTime = null;\r\n        this.articles = [];\r\n        this.loadArticles();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .article {\r\n    padding-bottom: 26px;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Articles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Articles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Articles.vue?vue&type=template&id=501c104d&scoped=true&\"\nimport script from \"./Articles.vue?vue&type=script&lang=js&\"\nexport * from \"./Articles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Articles.vue?vue&type=style&index=0&id=501c104d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"501c104d\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Articles.vue?vue&type=style&index=0&id=501c104d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Articles.vue?vue&type=style&index=0&id=501c104d&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}